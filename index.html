<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Christmas Wheel of Names</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      :root {
        --bg-deep: #061119;
        --bg-red: #7f1d1d;
        --bg-green: #064e3b;
        --snow: rgba(255, 255, 255, 0.9);
        --wheel-border: #facc15;
        --accent-green: #22c55e;
        --accent-red: #ef4444;
        --accent-gold: #facc15;
        --text: #f9fafb;
      }

      * {
        box-sizing: border-box;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
      }

      body {
        margin: 0;
        height: 100vh;
        width: 100vw;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        background: radial-gradient(circle at top, #fef3c7 0, transparent 45%),
          radial-gradient(circle at bottom, #022c22 0, transparent 55%),
          linear-gradient(
            135deg,
            var(--bg-red),
            var(--bg-deep),
            var(--bg-green)
          );
        color: var(--text);
      }

      /* Subtle candy cane border */
      body::before {
        content: "";
        position: fixed;
        inset: 0;
        padding: 8px;
        background: repeating-linear-gradient(
          45deg,
          #b91c1c 0,
          #b91c1c 6px,
          #fef2f2 6px,
          #fef2f2 12px
        );
        -webkit-mask: linear-gradient(#000 0 0) content-box,
          linear-gradient(#000 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
        pointer-events: none;
        opacity: 0.35;
        z-index: 0;
      }

      .snow {
        position: fixed;
        inset: 0;
        pointer-events: none;
        background-image: radial-gradient(
            2px 2px at 10% 20%,
            var(--snow),
            transparent
          ),
          radial-gradient(
            1.5px 1.5px at 80% 30%,
            rgba(255, 255, 255, 0.7),
            transparent
          ),
          radial-gradient(
            2.5px 2.5px at 30% 70%,
            rgba(255, 255, 255, 0.65),
            transparent
          ),
          radial-gradient(
            1.5px 1.5px at 60% 80%,
            rgba(255, 255, 255, 0.55),
            transparent
          );
        opacity: 0.9;
        animation: snowMove 25s linear infinite;
        z-index: 0;
      }

      @keyframes snowMove {
        from {
          transform: translateY(-40px);
        }
        to {
          transform: translateY(40px);
        }
      }

      .string-lights {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        height: 60px;
        background: radial-gradient(
            circle at 10% 80%,
            #f97316 0,
            transparent 40%
          ),
          radial-gradient(circle at 25% 80%, #22c55e 0, transparent 40%),
          radial-gradient(circle at 40% 80%, #3b82f6 0, transparent 40%),
          radial-gradient(circle at 55% 80%, #facc15 0, transparent 40%),
          radial-gradient(circle at 70% 80%, #f97316 0, transparent 40%),
          radial-gradient(circle at 85% 80%, #22c55e 0, transparent 40%);
        opacity: 0.9;
        pointer-events: none;
        z-index: 1;
        mix-blend-mode: screen;
      }

      .app {
        position: relative;
        z-index: 2;
        width: 100vw;
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        gap: 16px;
        padding: 12px;
      }

      .top-bar {
        position: absolute;
        top: 14px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 8px 14px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.85);
        border: 1px solid rgba(248, 250, 252, 0.25);
        backdrop-filter: blur(12px);
        font-size: 0.9rem;
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.7);
      }

      .top-bar-title {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .tree-dot {
        width: 18px;
        height: 18px;
        border-radius: 999px;
        background: radial-gradient(
            circle at 30% 10%,
            #facc15 0,
            transparent 55%
          ),
          linear-gradient(180deg, #22c55e, #14532d);
        box-shadow: 0 0 14px rgba(250, 204, 21, 0.9),
          0 0 28px rgba(34, 197, 94, 0.7);
        position: relative;
      }

      .tree-dot::after {
        content: "‚òÖ";
        position: absolute;
        top: -16px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 12px;
        color: #facc15;
        text-shadow: 0 0 6px rgba(250, 204, 21, 0.9);
      }

      .btn {
        border: none;
        border-radius: 999px;
        padding: 7px 14px;
        font-size: 0.8rem;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        cursor: pointer;
        background: rgba(15, 23, 42, 0.9);
        color: var(--text);
        transition: transform 0.1s ease, box-shadow 0.1s ease,
          background 0.15s ease;
        white-space: nowrap;
      }

      .btn span.icon {
        font-size: 0.95rem;
      }

      .btn:hover {
        background: rgba(15, 23, 42, 1);
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.6);
      }

      .btn:active {
        transform: translateY(0);
        box-shadow: none;
      }

      .btn-primary {
        background: linear-gradient(135deg, #facc15, #22c55e);
        color: #042f2e;
        font-weight: 700;
        font-size: 1rem;
        padding: 11px 24px;
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.8);
      }

      .btn-primary:hover {
        background: linear-gradient(135deg, #fce97c, #4ade80);
      }

      .btn-danger {
        background: linear-gradient(135deg, #fecaca, #ef4444);
        color: #7f1d1d;
        font-weight: 600;
      }

      .btn-overlay {
        background: linear-gradient(135deg, #22c55e, #16a34a);
        color: #022c22;
        font-weight: 800;
        font-size: 1rem;
        padding: 12px 28px;
        box-shadow: 0 12px 28px rgba(0, 0, 0, 0.9);
      }

      .wheel-area {
        position: relative;
        width: min(90vmin, 650px);
        aspect-ratio: 1 / 1;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .wheel-shell {
        position: relative;
        width: 100%;
        height: 100%;
        border-radius: 50%;
        background: radial-gradient(circle at center, #111827 0, #020617 60%);
        border: 8px solid var(--wheel-border);
        box-shadow: 0 0 0 8px rgba(234, 179, 8, 0.55),
          0 30px 70px rgba(0, 0, 0, 0.85);
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: transform 7s cubic-bezier(0.23, 0.95, 0.15, 0.99); /* longer spin */
      }

      canvas#wheelCanvas {
        width: 100%;
        height: 100%;
        border-radius: 50%;
      }

      .pointer {
        position: absolute;
        top: -4%;
        width: 0;
        height: 0;
        border-left: 22px solid transparent;
        border-right: 22px solid transparent;
        border-bottom: 36px solid #facc15;
        filter: drop-shadow(0 3px 4px rgba(0, 0, 0, 0.7));
        z-index: 4;
      }

      .pointer-base {
        position: absolute;
        top: 3%;
        width: 26px;
        height: 26px;
        border-radius: 50%;
        background: radial-gradient(circle at 30% 30%, #fef3c7, #facc15);
        border: 2px solid #854d0e;
        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.6);
        z-index: 3;
      }

      .center-hub {
        position: absolute;
        width: 34%;
        height: 34%;
        border-radius: 50%;
        background: radial-gradient(circle at 30% 0, #bbf7d0 0, transparent 55%),
          radial-gradient(circle at center, #16a34a 0, #064e3b 50%);
        border: 5px solid rgba(15, 23, 42, 0.9);
        box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.7),
          0 0 20px rgba(34, 197, 94, 0.55);
        z-index: 2;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: 10px;
      }

      .winner-text-empty {
        font-size: 0.9rem;
        color: #e5e7eb;
      }

      .winner-text {
        font-weight: 700;
        font-size: 1.05rem;
        color: #fef3c7;
        text-shadow: 0 0 6px rgba(220, 252, 231, 0.9),
          0 0 14px rgba(74, 222, 128, 0.8);
      }

      .bottom-controls {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 6px;
        margin-top: 4px;
        text-align: center;
      }

      .toast {
        font-size: 0.8rem;
        color: #fee2e2;
        min-height: 1em;
        text-shadow: 0 0 4px rgba(0, 0, 0, 0.7);
      }

      .counter {
        font-size: 0.78rem;
        color: #e5e7eb;
        opacity: 0.9;
      }

      .history {
        font-size: 0.78rem;
        color: #e5e7eb;
        max-width: 260px;
      }

      .history strong {
        color: #fef9c3;
      }

      /* Full-screen winner overlay */
      .winner-overlay {
        position: fixed;
        inset: 0;
        background: radial-gradient(
            circle at top,
            rgba(254, 243, 199, 0.9) 0,
            rgba(0, 0, 0, 0.8) 60%
          ),
          linear-gradient(
            135deg,
            rgba(127, 29, 29, 0.95),
            rgba(6, 78, 59, 0.95)
          );
        display: none;
        align-items: center;
        justify-content: center;
        text-align: center;
        z-index: 30;
        color: #fefce8;
      }

      .winner-overlay.show {
        display: flex;
      }

      .winner-overlay-content {
        padding: 24px;
        max-width: 90vw;
      }

      .winner-overlay-label {
        font-size: 1.1rem;
        letter-spacing: 0.16em;
        text-transform: uppercase;
        margin-bottom: 10px;
        color: #fef3c7;
      }

      .winner-overlay-name {
        font-size: clamp(2.8rem, 7vw, 4.5rem);
        font-weight: 900;
        text-shadow: 0 0 10px rgba(220, 252, 231, 0.9),
          0 0 20px rgba(34, 197, 94, 0.8), 0 0 40px rgba(248, 250, 252, 0.8);
        margin-bottom: 14px;
        line-height: 1.1;
      }

      .winner-overlay-sub {
        font-size: 1rem;
        margin-bottom: 18px;
      }

      /* Modal */

      .modal-backdrop {
        position: fixed;
        inset: 0;
        background: rgba(15, 23, 42, 0.85);
        backdrop-filter: blur(12px);
        display: none;
        align-items: center;
        justify-content: center;
        padding: 16px;
        z-index: 20;
      }

      .modal-backdrop.show {
        display: flex;
      }

      .modal {
        width: 100%;
        max-width: 440px;
        background: radial-gradient(circle at top, #fecaca 0, #111827 55%);
        border-radius: 18px;
        padding: 16px 16px 14px;
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.8);
        border: 1px solid rgba(248, 250, 252, 0.2);
        color: #111827;
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 6px;
      }

      .modal-title {
        display: flex;
        align-items: center;
        gap: 6px;
        font-weight: 700;
        font-size: 0.95rem;
      }

      .modal-title span.emoji {
        font-size: 1.1rem;
      }

      .modal-close {
        border: none;
        background: transparent;
        font-size: 1.2rem;
        cursor: pointer;
        color: #111827;
      }

      .modal-subtitle {
        font-size: 0.78rem;
        color: #0f172a;
        margin-bottom: 6px;
      }

      textarea {
        width: 100%;
        min-height: 240px;
        resize: vertical;
        background: rgba(15, 23, 42, 0.92);
        color: #f9fafb;
        border-radius: 10px;
        border: 1px solid rgba(148, 163, 184, 0.7);
        padding: 8px 10px;
        font-size: 0.85rem;
        outline: none;
      }

      textarea:focus {
        border-color: #22c55e;
        box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.6);
      }

      .modal-chips {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        margin: 6px 0;
      }

      .chip {
        font-size: 0.7rem;
        padding: 4px 8px;
        border-radius: 999px;
        background: rgba(220, 38, 38, 0.18);
        border: 1px solid rgba(248, 113, 113, 0.8);
        color: #7f1d1d;
        cursor: pointer;
        user-select: none;
      }

      .chip:hover {
        background: rgba(248, 113, 113, 0.9);
        color: #7f1d1d;
      }

      .modal-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 8px;
        gap: 8px;
      }

      .modal-footer-left {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
      }

      .checkbox-row {
        display: flex;
        align-items: center;
        gap: 4px;
        font-size: 0.75rem;
        color: #0f172a;
      }

      .checkbox-row input[type="checkbox"] {
        accent-color: #22c55e;
        width: 14px;
        height: 14px;
      }
    </style>
  </head>
  <body>
    <div class="snow"></div>
    <div class="string-lights"></div>

    <!-- Jingle bell sting (place jingle-bells.mp3 next to this file) -->
    <audio id="spinSound" src="jingle-bells.mp3" preload="auto"></audio>

    <div class="app">
      <div class="top-bar">
        <div class="top-bar-title">
          <div class="tree-dot"></div>
          <span>Christmas Wheel of Names</span>
        </div>
        <button class="btn" id="openModalBtn">
          <span class="icon">üéÑ</span>
          Edit Names
        </button>
      </div>

      <div class="wheel-area">
        <div class="pointer"></div>
        <div class="pointer-base"></div>
        <div class="wheel-shell" id="wheelShell">
          <canvas id="wheelCanvas"></canvas>
          <div class="center-hub">
            <div id="winnerText" class="winner-text-empty">
              Add some names<br />and press SPIN üéÖ
            </div>
          </div>
        </div>
      </div>

      <div class="bottom-controls">
        <button id="spinBtn" class="btn btn-primary">
          <span class="icon">üéÅ</span>
          SPIN THE WHEEL
        </button>
        <div id="toast" class="toast"></div>
        <div id="counter" class="counter">0 names</div>
        <div id="history" class="history"></div>
      </div>
    </div>

    <!-- Full-screen Winner Overlay -->
    <div id="winnerOverlay" class="winner-overlay">
      <div class="winner-overlay-content">
        <div class="winner-overlay-label">üéÑ Tonight's Lucky Elf üéÑ</div>
        <div id="winnerOverlayName" class="winner-overlay-name"></div>
        <div class="winner-overlay-sub">
          Click below (or anywhere) when you are ready to spin again.
        </div>
        <button id="winnerCloseBtn" class="btn btn-overlay">
          <span class="icon">üîî</span>
          Spin Again
        </button>
      </div>
    </div>

    <!-- Modal for names -->
    <div id="modalBackdrop" class="modal-backdrop">
      <div class="modal">
        <div class="modal-header">
          <div class="modal-title">
            <span class="emoji">üìù</span>
            <span>Edit Names</span>
          </div>
          <button class="modal-close" id="closeModalBtn" aria-label="Close">
            ‚úï
          </button>
        </div>
        <div class="modal-subtitle">
          One name per line. These will appear on the slices of the wheel.
        </div>

        <div class="modal-chips">
          <div class="chip" id="chipSample">Reset to Trent &amp; crew</div>
          <div class="chip" id="chipShuffle">Shuffle</div>
          <div class="chip" id="chipClear">Clear all</div>
        </div>

        <textarea id="entries"></textarea>

        <div class="modal-footer">
          <div class="modal-footer-left">
            <button class="btn btn-danger" id="btnClear">
              <span class="icon">üóëÔ∏è</span>
              Clear
            </button>
            <button class="btn" id="btnShuffle">
              <span class="icon">üîÄ</span>
              Shuffle
            </button>
          </div>
          <div class="checkbox-row">
            <input type="checkbox" id="removeWinner" checked />
            <label for="removeWinner">Remove winner after spin</label>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Elements
      const canvas = document.getElementById("wheelCanvas");
      const wheelShell = document.getElementById("wheelShell");
      const winnerTextEl = document.getElementById("winnerText");
      const spinBtn = document.getElementById("spinBtn");
      const toastEl = document.getElementById("toast");
      const counterEl = document.getElementById("counter");
      const historyEl = document.getElementById("history");

      const entriesEl = document.getElementById("entries");
      const removeWinnerEl = document.getElementById("removeWinner");
      const chipSample = document.getElementById("chipSample");
      const chipShuffle = document.getElementById("chipShuffle");
      const chipClear = document.getElementById("chipClear");
      const btnShuffle = document.getElementById("btnShuffle");
      const btnClear = document.getElementById("btnClear");

      const modalBackdrop = document.getElementById("modalBackdrop");
      const openModalBtn = document.getElementById("openModalBtn");
      const closeModalBtn = document.getElementById("closeModalBtn");

      const winnerOverlay = document.getElementById("winnerOverlay");
      const winnerOverlayName = document.getElementById("winnerOverlayName");
      const winnerCloseBtn = document.getElementById("winnerCloseBtn");

      const spinSound = document.getElementById("spinSound");

      let isSpinning = false;
      let currentRotation = 0; // full accumulated rotation in degrees
      let winnersHistory = [];

      const COLORS = [
        "#ef4444", // red
        "#22c55e", // green
        "#facc15", // gold
        "#0ea5e9", // icy blue
        "#b91c1c", // dark red
        "#16a34a", // forest green
      ];

      const DEFAULT_ENTRIES = [
        "Trent - R1",
        "Abbey - R1",
        "Raigan - R1",
        "Josh - R1",
        "Taelor - R1",
        "Stephen - R1",
        "Terri - R1",
        "Dusty - R1",
        "Trent - R2",
        "Abbey - R2",
        "Raigan - R2",
        "Josh - R2",
        "Taelor - R2",
        "Stephen - R2",
        "Terri - R2",
        "Dusty - R2",
      ];

      function setDefaultEntries() {
        entriesEl.value = DEFAULT_ENTRIES.join("\n");
        syncFromTextarea();
      }

      function parseEntries() {
        return entriesEl.value
          .split("\n")
          .map((s) => s.trim())
          .filter(Boolean);
      }

      function updateCounter(entries) {
        const n = entries.length;
        counterEl.textContent = n === 1 ? "1 name" : `${n} names`;
      }

      function drawWheel(entries) {
        const n = entries.length;
        const ctx = canvas.getContext("2d");

        const size = 800; // base draw size, scaled via CSS
        canvas.width = size;
        canvas.height = size;

        const center = size / 2;
        const radius = size / 2 - 10;

        ctx.clearRect(0, 0, size, size);

        if (!n) {
          // Empty subtle background ring
          ctx.save();
          ctx.translate(center, center);
          ctx.fillStyle = "rgba(31,41,55,0.7)";
          ctx.beginPath();
          ctx.arc(0, 0, radius, 0, Math.PI * 2);
          ctx.fill();
          ctx.restore();
          updateCounter([]);
          return;
        }

        const segmentAngle = (2 * Math.PI) / n;

        ctx.save();
        ctx.translate(center, center);

        for (let i = 0; i < n; i++) {
          const startAngle = i * segmentAngle;
          const endAngle = startAngle + segmentAngle;

          // Slice
          ctx.beginPath();
          ctx.moveTo(0, 0);
          ctx.arc(0, 0, radius, startAngle, endAngle);
          ctx.closePath();
          ctx.fillStyle = COLORS[i % COLORS.length];
          ctx.fill();

          // Text
          const label = entries[i];
          ctx.save();
          const textAngle = startAngle + segmentAngle / 2;
          ctx.rotate(textAngle);
          ctx.textAlign = "right";
          ctx.fillStyle = "#111827";
          ctx.font = "bold 24px system-ui, sans-serif";

          const maxTextWidth = radius - 30;
          let text = label;
          while (
            ctx.measureText(text).width > maxTextWidth &&
            text.length > 3
          ) {
            text = text.slice(0, -1);
          }
          if (text !== label) text = text.slice(0, -1) + "‚Ä¶";

          ctx.fillText(text, radius - 16, 8);
          ctx.restore();
        }

        ctx.restore();

        updateCounter(entries);
      }

      function syncFromTextarea() {
        const entries = parseEntries();
        drawWheel(entries);

        if (!entries.length) {
          winnerTextEl.className = "winner-text-empty";
          winnerTextEl.textContent = "Add some names\nand press SPIN üéÖ";
        }
      }

      function shuffleArray(arr) {
        for (let i = arr.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr;
      }

      function shuffleTextarea() {
        const entries = shuffleArray(parseEntries());
        entriesEl.value = entries.join("\n");
        syncFromTextarea();
      }

      function showToast(msg) {
        toastEl.textContent = msg;
        if (!msg) return;
        setTimeout(() => {
          if (toastEl.textContent === msg) toastEl.textContent = "";
        }, 2500);
      }

      function addToHistory(name) {
        winnersHistory.unshift(name);
        if (winnersHistory.length > 5) winnersHistory.pop();
        historyEl.innerHTML = winnersHistory.length
          ? `<strong>Recent winners:</strong> ${winnersHistory.join(" ‚Ä¢ ")}`
          : "";
      }

      function openModal() {
        modalBackdrop.classList.add("show");
      }

      function closeModal() {
        modalBackdrop.classList.remove("show");
      }

      function openWinnerOverlay(name) {
        winnerOverlayName.textContent = name;
        winnerOverlay.classList.add("show");
      }

      function closeWinnerOverlay() {
        winnerOverlay.classList.remove("show");
        // re-enable spin button when user is ready
        spinBtn.disabled = false;
      }

      // Spin logic: winner comes from where ticker lands + at least 12 rotations every time
      spinBtn.addEventListener("click", () => {
        const entries = parseEntries();
        if (!entries.length || isSpinning) {
          if (!entries.length) showToast("Add at least one name to spin üéÑ");
          return;
        }

        isSpinning = true;
        spinBtn.disabled = true;
        spinBtn.innerHTML = '<span class="icon">üéÖ</span> Spinning...';

        const n = entries.length;

        // At least 12 full rotations, plus 0‚Äì3 extra for variety
        const minRotations = 12;
        const extraRotations = Math.floor(Math.random() * 4); // 0‚Äì3 extra spins
        const baseDegrees = 360 * (minRotations + extraRotations);
        const extraDegrees = Math.random() * 360;
        const spinDegrees = baseDegrees + extraDegrees;

        const totalRotation = currentRotation + spinDegrees;
        wheelShell.style.transform = `rotate(${totalRotation}deg)`;

        // Play jingle bells sting
        try {
          spinSound.currentTime = 0;
          spinSound.play().catch(() => {});
        } catch (e) {}

        const spinDuration = 7000; // must match CSS transition time

        setTimeout(() => {
          // Keep full accumulated rotation for future spins
          currentRotation = totalRotation;

          // But use a normalized copy just for pointer math
          const normalized = ((currentRotation % 360) + 360) % 360;

          const segmentDeg = 360 / n;
          const pointerDeg = 270; // top of circle in canvas coordinates

          let angleUnderPointer = pointerDeg - normalized;
          angleUnderPointer = ((angleUnderPointer % 360) + 360) % 360;

          const winnerIndex = Math.floor(angleUnderPointer / segmentDeg);
          const winner = entries[winnerIndex];

          isSpinning = false;
          // keep disabled until overlay dismissed
          spinBtn.innerHTML = '<span class="icon">üéÅ</span> SPIN THE WHEEL';

          if (!winner && winner !== "") {
            showToast("Spin complete, but could not determine winner.");
            spinBtn.disabled = false;
            return;
          }

          winnerTextEl.className = "winner-text";
          winnerTextEl.textContent = winner;

          addToHistory(winner);
          showToast(`Winner: ${winner}! üéÑ`);

          if (removeWinnerEl.checked) {
            const remaining = entries.filter((_, i) => i !== winnerIndex);
            entriesEl.value = remaining.join("\n");
            syncFromTextarea();
          }

          // Show full-screen winner overlay
          openWinnerOverlay(winner);
        }, spinDuration + 80);
      });

      // Modal + textarea events
      entriesEl.addEventListener("input", syncFromTextarea);

      chipSample.addEventListener("click", setDefaultEntries);
      chipShuffle.addEventListener("click", shuffleTextarea);
      chipClear.addEventListener("click", () => {
        entriesEl.value = "";
        syncFromTextarea();
      });

      btnShuffle.addEventListener("click", shuffleTextarea);
      btnClear.addEventListener("click", () => {
        entriesEl.value = "";
        syncFromTextarea();
      });

      openModalBtn.addEventListener("click", openModal);
      closeModalBtn.addEventListener("click", closeModal);
      modalBackdrop.addEventListener("click", (e) => {
        if (e.target === modalBackdrop) closeModal();
      });

      // Winner overlay events
      winnerCloseBtn.addEventListener("click", closeWinnerOverlay);
      winnerOverlay.addEventListener("click", (e) => {
        if (e.target === winnerOverlay) closeWinnerOverlay();
      });

      // Init with your R1/R2 list
      setDefaultEntries();
    </script>
  </body>
</html>
